.set LOCALID_NURSE, 1
.set LOCALID_INDIGOPLATEAU_ABRA, 6

IndigoPlateau_PokemonCenter_MapScripts::
	@map_script MAP_SCRIPT_ON_RESUME, CableClub_OnResume
	map_script MAP_SCRIPT_ON_FRAME_TABLE, IndigoPlateau_PokemonCenter_OnFrame 
	.byte 0

IndigoPlateau_PokemonCenter_OnFrame::
	map_script_2 VAR_LEAGUE_STATE, 0, IndigoPlateau_PokemonCenter_Enter
	map_script_2 VAR_LEAGUE_STATE, 2, IndigoPlateau_PokemonCenter_Enter
	map_script_2 VAR_LEAGUE_STATE, 3, IndigoPlateau_PokemonCenter_Enter
	map_script_2 VAR_LEAGUE_STATE, 4, IndigoPlateau_PokemonCenter_Enter
	map_script_2 VAR_LEAGUE_STATE, 5, IndigoPlateau_PokemonCenter_Enter
	map_script_2 VAR_LEAGUE_STATE, 6, IndigoPlateau_PokemonCenter_Enter
	.2byte 0

IndigoPlateau_PokemonCenter_Enter::
	setflag FLAG_VISITED_INDIGO_PLATEAU
	setvar VAR_LEAGUE_STATE, 1
	end

IndigoPlateau_EventScript_Cooltrainer::
	msgbox IndigoPlateau_Text_CooltrainerM, MSGBOX_NPC
	end

IndigoPlateau_EventScript_BlackBelt::
	msgbox IndigoPlateau_Text_Blackbelt, MSGBOX_NPC
	end

IndigoPlateau_EventScript_ShigyNinja::
	msgbox IndigoPlateau_Text_ShigyNinja, MSGBOX_NPC
	end

IndigoPlateau_Text_ShigyNinja:
	.string "Félicitations d'être arrivé jusqu'ici !\p"
	.string "J'ai vu passer des tas de dresseurs\n"
	.string "ici au fil des années, et\l"
	.string "ils sont tous merveilleusement uniques.\p"
	.string "Tu peux être fier de toi\n"
	.string "d'être allé aussi loin !\p"
	.string "Maintenant, vas-y, fonce !$"

IndigoPlateau_Text_Blackbelt:
	.string "La LIGUE POKéMON n'accepte pas\n"
	.string "de nouveaux challengers pour le moment.\p"
	.string "Merci de revenir plus tard.$"

IndigoPlateau_Text_CooltrainerM:
    .string "À la LIGUE POKéMON, tu seras mis\n"
    .string "à l'épreuve par le CONSEIL 4.\p"
    .string "Tu dois tous les battre. Si tu perds,\n"
    .string "tu devras tout recommencer !$"

IndigoPlateau_EventScript_Silver::
	lock
	faceplayer 
	goto_if_set FLAG_DAILY_BEAT_SILVER, IndigoPlateau_EventScript_SilverBeat
	msgbox IndigoPlateau_Text_RivalEntrance1, MSGBOX_DEFAULT
	call_if_eq VAR_STARTER_MON, 0, IndigoPlateau_Silver_Battle_Cyndaquil
	call_if_eq VAR_STARTER_MON, 1, IndigoPlateau_Silver_Battle_Totodile
	call_if_eq VAR_STARTER_MON, 2, IndigoPlateau_Silver_Battle_Chikorita
	msgbox IndigoPlateau_Text_RivalAfter, MSGBOX_DEFAULT
	setflag FLAG_DAILY_BEAT_SILVER
	release
	end

IndigoPlateau_EventScript_SilverBeat::
	msgbox IndigoPlateau_Text_RivalAfter, MSGBOX_DEFAULT
	closemessage
	release
	end

IndigoPlateau_Silver_Battle_Cyndaquil::
	trainerbattle_no_intro TRAINER_RIVAL_CYNDAQUIL_7, IndigoPlateau_Text_RivalWin
	return

IndigoPlateau_Silver_Battle_Totodile::
	trainerbattle_no_intro TRAINER_RIVAL_TOTODILE_7, IndigoPlateau_Text_RivalWin
	return

IndigoPlateau_Silver_Battle_Chikorita::
	trainerbattle_no_intro TRAINER_RIVAL_CHIKORITA_7, IndigoPlateau_Text_RivalWin
	return

IndigoPlateau_Text_RivalEntrance1:
    .string "Attends un peu.\p"
    .string "Tu comptes défier la LIGUE\n"
    .string "POKéMON maintenant ?\p"
    .string "Ça n'arrivera pas.\p"
    .string "Mes POKéMON super bien entraînés\n"
    .string "vont t'écraser.\p"
    .string "{PLAYER} !\n"
    .string "Je te lance un défi !$"

IndigoPlateau_Text_RivalWin:
    .string "…\p"
    .string "OK… J'ai perdu…$"

IndigoPlateau_Text_RivalAfter:
    .string "…Mince… Je n'arrive toujours pas à gagner…\p"
    .string "Je… Je dois réfléchir davantage à mes\n"
    .string "POKéMON…\p"
    .string "Tch… Essaie de ne pas perdre !$"

IndigoPlateau_EventScript_Psychic::
	lock
	faceplayer
	msgbox IndigoPlateau_Text_TeleportGuy1, MSGBOX_YESNO
	goto_if_eq VAR_RESULT, TRUE, IndigoPlateau_EventScript_PsychicTeleport
	msgbox IndigoPlateau_Text_TeleportGuyNo, MSGBOX_DEFAULT
	closemessage
	release
	end

IndigoPlateau_EventScript_PsychicTeleport::
	msgbox IndigoPlateau_Text_TeleportGuyYes, MSGBOX_DEFAULT
	closemessage
	turnobject OBJ_EVENT_ID_PLAYER, DIR_SOUTH
	playbgm MUS_HG_NEW_BARK, TRUE
	delay 60
	playmoncry SPECIES_ABRA, CRY_MODE_NORMAL
	applymovement2 LOCALID_INDIGOPLATEAU_ABRA, IndigoPLateau_Movement_Abra
	waitmovement 0
	fadescreen FADE_TO_WHITE
	warpteleport MAP_NEW_BARK_TOWN, 20, 12
	release
	end
	
IndigoPLateau_Movement_Abra:
	jump_in_place_right
	jump_in_place_right
	step_end

IndigoPlateau_EventScript_Abra::
	lock
	faceplayer
	waitse
	playmoncry SPECIES_ABRA, CRY_MODE_NORMAL
	msgbox IndigoPlateau_Text_Abra, MSGBOX_DEFAULT
	waitmoncry
	release
	end

IndigoPlateau_Text_TeleportGuy1:
    .string "Ah ! Tu veux défier le CONSEIL\n"
    .string "DES 4 ? Tu es sûr d'être prêt ?\p"
    .string "Si tu as encore besoin de t'entraîner,\n"
    .string "mon ABRA peut t'aider.\p"
    .string "Il peut te TÉLÉPORTER chez toi.\p"
    .string "Veux-tu rentrer chez toi maintenant ?$"

IndigoPlateau_Text_TeleportGuyYes:
    .string "OK, OK. Imagine ta maison dans\n"
    .string "ta tête…$"

IndigoPlateau_Text_TeleportGuyNo:
    .string "OK, OK. Bonne chance à toi !$"

IndigoPlateau_Text_Abra:
    .string "ABRA : Aaabra…$"
